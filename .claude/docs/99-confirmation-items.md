# Confirmation Items (確認事項・TODO)

このファイルには、基本設計書から派生した確認事項やTODO項目を記録します。

**最終更新**: 2026-01-24
**ステータス**: 職員向けUI基盤実装完了（TDD）

---

## 確定事項（クライアント確認済み）

以下の項目はクライアント確認により確定しました：

| 項目 | 決定内容 | 確定日 |
|------|----------|--------|
| 動画ファイル形式 | **MP4** | 2026-01-23 |
| オフライン視聴 | **不要** | 2026-01-23 |
| ダークモード | **不要** | 2026-01-23 |
| レポート出力形式 | **CSV** | 2026-01-23 |
| 未言及機能 | **全て実装** | 2026-01-23 |

---

## システム設計に関する確認事項

### 1. 動画配信の詳細仕様
- [x] 動画ファイル形式の確定 → **MP4**
- [ ] 動画ファイルサイズの上限（推奨: 100MB以下）
- [ ] ストリーミング方式（プログレッシブダウンロード推奨）
- [ ] 帯域幅制限への対応方針
- [x] オフライン視聴機能 → **不要**

### 2. データベース詳細設計
- [ ] PostgreSQLバージョンの確定
- [ ] データベース暗号化の実装方式詳細
- [ ] バックアップ・リストア手順の策定
- [ ] レプリケーション構成の検討

### 3. 認証・セキュリティ
- [ ] 二要素認証(2FA)の導入要否
- [ ] パスワードリセットのメール送信仕様
- [ ] セッションタイムアウト後の挙動詳細
- [ ] API呼び出しのレート制限詳細

### 4. UI/UX詳細
- [ ] ウェルカム画面の自動遷移時間の調整（現在3秒）
- [ ] 祝福演出のアニメーション詳細
- [x] ダークモード対応 → **不要**
- [ ] プッシュ通知の実装範囲

### 5. レポート機能
- [x] レポート出力形式 → **CSV**
- [ ] レポートテンプレートのデザイン（CSVカラム定義）
- [ ] 出力対象データ項目の確定

### 6. 運用・保守
- [ ] ログ監視ツールの選定
- [ ] エラー通知の仕組み（Slack/メール）
- [ ] メンテナンスモードの実装方針
- [ ] デプロイ手順書の作成

## 機能実装の優先順位

### Phase 1: MVP (最小機能製品)
- [x] ログイン機能（利用者・職員）
- [ ] 運動メニュー表示
- [ ] 運動記録（基本）
- [ ] 体調記録
- [ ] 測定値入力（職員）
- [x] ダッシュボード（職員） ← **2026-01-24実装完了**
- [x] 患者一覧（職員） ← **2026-01-24実装完了**

### Phase 2: 拡張機能
- [ ] 履歴グラフ表示
- [ ] レポート出力
- [ ] 運動メニュー割当（職員）
- [ ] 職員管理（マネージャー）
- [ ] まとめて記録機能

### Phase 3: 最適化・改善
- [ ] パフォーマンス最適化
- [x] オフライン対応 → **不要**
- [ ] プッシュ通知
- [ ] PWA対応

## テスト計画

### 単体テスト
- [ ] モデルバリデーションテスト
- [ ] APIエンドポイントテスト
- [x] Reactコンポーネントテスト（職員向けUI）
  - [x] AuthContext (7 tests, 91.66% coverage)
  - [x] Login (19 tests, 95.54% coverage)
  - [x] Sidebar (15 tests, 100% coverage)
  - [x] Dashboard (22 tests, 100% coverage)
  - [x] PatientList (29 tests, 97.9% coverage)
  - **Total: 92 tests passed, 98.98% overall coverage**

### 結合テスト
- [ ] 認証フローテスト
- [ ] 運動記録フローテスト
- [ ] データ暗号化テスト
- [ ] 権限制御テスト

### E2Eテスト
- [ ] 利用者: ログイン〜運動記録〜体調入力
- [ ] 職員: ログイン〜患者閲覧〜測定値入力
- [ ] マネージャー: 職員管理

### セキュリティテスト
- [ ] SQLインジェクション対策確認
- [ ] XSS対策確認
- [ ] CSRF対策確認
- [ ] セッションハイジャック対策確認

## ドキュメント整備

- [x] CLAUDE.md作成
- [x] 01-system-overview.md作成
- [x] 02-screen-design.md作成
- [x] 03-database-schema.md作成
- [x] 04-api-specification.md作成
- [x] 05-security-requirements.md作成
- [x] 06-non-functional-requirements.md作成
- [ ] README.md更新（開発環境セットアップ手順）
- [ ] CONTRIBUTING.md作成
- [ ] API利用ガイド作成

## インフラ・環境

### 開発環境
- [ ] Dockerコンテナ構成の確定
- [ ] docker-compose.yml作成
- [ ] 環境変数テンプレート (.env.example) 作成

### ステージング環境
- [ ] サーバースペック確定
- [ ] デプロイスクリプト作成
- [ ] SSL証明書取得

### 本番環境
- [ ] サーバースペック確定
- [ ] 監視設定
- [ ] バックアップ設定
- [ ] ドメイン設定

## その他

### アクセシビリティ
- [ ] スクリーンリーダーでの動作確認
- [ ] キーボードナビゲーション確認
- [ ] コントラスト比検証ツール実行

### パフォーマンス
- [ ] Lighthouse スコア測定
- [ ] バンドルサイズ最適化
- [ ] 画像最適化
- [ ] Code splitting実装

### コンプライアンス
- [ ] 個人情報保護法対応チェックリスト
- [ ] 医療情報ガイドライン準拠確認
- [ ] 利用規約・プライバシーポリシー作成

## 実装完了項目（2026-01-24）

### 職員向けUI基盤（TDD実装）

**実装方針**: Test-Driven Development (Red-Green-Refactorサイクル)

**実装コンポーネント**:
1. **Sidebar** (`frontend_admin/src/components/Sidebar.tsx`)
   - サイドバー背景色 #1E40AF
   - ナビゲーション: ダッシュボード、患者一覧
   - 役割ベース表示（マネージャーのみ職員管理表示）
   - 職員プロフィール・ログアウト
   - 15 tests, 100% coverage

2. **Dashboard** (`frontend_admin/src/components/Dashboard.tsx`)
   - KPIカード4枚（担当患者数、来院予定、運動実施、全患者数）
   - 担当患者一覧
   - ステータスバッジ（急性期:赤/回復期:黄/維持期:緑）
   - 測定値入力・メニュー設定ボタン
   - 22 tests, 100% coverage

3. **PatientList** (`frontend_admin/src/components/PatientList.tsx`)
   - 患者一覧テーブル（7カラム）
   - 検索機能（患者名、カナ、300msデバウンス）
   - ステータスフィルタ
   - ページネーション
   - 29 tests, 97.9% coverage

**テスト結果**:
- Total: 92 tests passed
- Overall coverage: 98.98% (目標80%を大幅超過)
  - Statements: 98.98%
  - Branches: 97.22%
  - Functions: 95.23%
  - Lines: 98.98%

**ビルド状態**: ✅ 成功

**型定義追加**:
- `Patient`, `PatientStatus`, `PatientsListResponse`, `DashboardStats`

**アクセシビリティ準拠**:
- 最小タップ領域: 44×44px
- 適切なaria-label、role属性
- テーブル構造の正しい実装
- キーボードナビゲーション対応

## 基本設計書v4.1からの未実装項目

基本設計書に記載されているが、まだコード化されていない項目:

- [ ] U-09: パスワードリセット（利用者）
- [ ] U-15: まとめて記録
- [ ] S-07: レポート出力
- [ ] S-08: 職員管理
- [ ] S-09: パスワードリセット（職員）
- [ ] 動画アクセス制御の実装
- [ ] データ暗号化の実装
- [ ] 監査ログの実装
- [ ] レート制限の実装
