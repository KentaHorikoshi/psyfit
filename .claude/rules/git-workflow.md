# Gitワークフロー

## コミットメッセージ形式

```
<type>: <description>

<optional body>
```

タイプ: feat, fix, refactor, docs, test, chore, perf, ci

例:
- `feat: 継続日数の自動更新機能を追加`
- `fix: ログイン時のセッションタイムアウトを修正`
- `refactor: 患者一覧のページネーションを改善`

## プルリクエストワークフロー

PR作成時:
1. 全コミット履歴を分析（最新だけでなく全て）
2. `git diff [base-branch]...HEAD` で全変更を確認
3. 包括的なPRサマリーを作成
4. テスト計画をTODOリストで含める
5. 新しいブランチの場合は `-u` フラグでプッシュ

## 機能実装ワークフロー

1. **まず計画**
   - **planner** エージェントで実装計画を作成
   - 依存関係とリスクを特定
   - フェーズに分割

2. **TDDアプローチ**
   - **tdd-guide** エージェントを使用
   - テストを先に書く (RED)
   - テストを通す実装 (GREEN)
   - リファクタリング (IMPROVE)
   - 80%+カバレッジを確認

3. **コードレビュー**
   - コード作成直後に **code-reviewer** エージェントを使用
   - CRITICALとHIGHの問題に対処
   - 可能ならMEDIUMの問題も修正

4. **コミット & プッシュ**
   - 詳細なコミットメッセージ
   - 従来のコミット形式に従う

## ブランチ戦略

- `main` - 本番環境
- `develop` - 開発環境
- `feature/*` - 機能開発
- `fix/*` - バグ修正

## 禁止事項

- mainブランチへの直接コミット
- 本番コードにconsole.logを残す
- テストが失敗した状態でのマージ
- セキュリティ問題があるコードのマージ
