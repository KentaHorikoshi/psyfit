#!/bin/bash
set -e

# PsyFit Docker起動スクリプト
echo "=== PsyFit Docker Start ==="

# 環境変数ファイルの確認
if [ ! -f .env ]; then
  echo "Error: .env file not found. Run bin/docker-setup first."
  exit 1
fi

# 引数に応じた起動
case "${1:-}" in
  api)
    echo "Starting API only..."
    docker compose up api
    ;;
  frontend)
    echo "Starting frontends only..."
    docker compose up frontend_user frontend_admin
    ;;
  db)
    echo "Starting database services only..."
    docker compose up db redis
    ;;
  -d|--detach)
    echo "Starting all services (detached)..."
    docker compose up -d
    echo ""
    echo "Services started. View logs with: docker compose logs -f"
    ;;
  stop)
    echo "Stopping all services..."
    docker compose down
    ;;
  *)
    echo "Starting all services..."
    docker compose up
    ;;
esac
