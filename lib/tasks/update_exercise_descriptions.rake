# frozen_string_literal: true

namespace :data do
  desc "運動メニューのdescriptionを動画表示用の備考に更新"
  task update_exercise_descriptions: :environment do
    notes_map = {
      "肘を曲げる運動" => [
        "肘が90度以上曲がり1秒キープしたら「達成」"
      ],
      "上肢回旋（ソラシックツイスト）" => [
        "上側の指先を見ながら、首も一緒に動かす",
        "手だけを動かさないように注意",
        "下半身は動かさないようにする",
        "手を真上に上げた際に脱力する"
      ],
      "下肢回旋（両膝倒しツイスト）" => [
        "手は広げて実施する",
        "肩が浮かないように実施する",
        "両膝はつけたまま実施する"
      ],
      "チェアスクワット" => [
        "膝がつま先より前に出ないようにする",
        "膝の向きはつま先と同じにする",
        "足を肩幅に広げる",
        "椅子に浅く座る",
        "立つのに3秒、座るのに5秒かける",
        "座る際はゆっくり座る"
      ],
      "膝伸ばし（座位膝伸展運動）" => [
        "反対側の膝の高さまで上げる",
        "深く座った状態で、ひざ下のみを伸ばす",
        "つま先を自分側に向けて実施する"
      ],
      "膝つきプランク" => [
        "15秒間実施にて1回とする",
        "腰が反ったり丸まったりしないよう注意",
        "肩、膝、体を一直線にする",
        "両膝、両肘の間隔は肩幅に保つ"
      ],
      "ロールダウン" => [
        "両足底は床につけておく",
        "両膝の間にクッションを挟むとお腹に力が入りやすい",
        "体は丸まったまま実施し、腰をそらさない",
        "倒れるぎりぎりのところまで倒して体を起こす"
      ],
      "バックブリッジ" => [
        "膝は90度曲げ、足は肩幅に広げる",
        "お尻を挙げる際は膝と体と肩を一直線にする",
        "腰が反らないように注意する",
        "クッションを挟むとより効果的"
      ],
      "背中丸め（座位片膝抱えストレッチ）" => [
        "肩の力を抜いて実施する",
        "肘を伸ばして実施する"
      ],
      "殿筋トレーニング(膝屈曲位うつ伏せ股関節伸展運動)" => [
        "実施側の膝は90度以上曲げて行う",
        "骨盤が浮かないようにつけたまま実施する"
      ],
      "キャットアンドドッグ" => [
        "両手、両膝は肩幅に開いてつく",
        "背骨を動かす時は骨盤の方から動かす"
      ]
    }

    updated = 0
    notes_map.each do |name, notes|
      exercise = Exercise.find_by(name: name)
      if exercise
        exercise.update!(description: notes.join("\n"))
        puts "  Updated: #{name}"
        updated += 1
      else
        puts "  Not found: #{name}"
      end
    end

    puts "#{updated}/#{notes_map.size} exercises updated."
  end
end
